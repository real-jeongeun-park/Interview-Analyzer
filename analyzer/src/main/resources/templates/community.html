<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>êµ¬ì§ì ì»¤ë®¤ë‹ˆí‹°</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans text-gray-800">

  <!-- í—¤ë” -->
  <header class="text-white text-center py-6 shadow" style="background-color: #4a90e2;">
    <h1 class="text-2xl font-bold">ğŸ’¬ êµ¬ì§ì ì»¤ë®¤ë‹ˆí‹°</h1>
    <p class="text-sm mt-1 text-white">ì·¨ì—… ê³ ë¯¼, íŒ, ì§ˆë¬¸ì„ ììœ ë¡­ê²Œ ë‚˜ëˆ„ì„¸ìš”!</p>
  </header>

  <!-- ê²€ìƒ‰ -->
  <section class="max-w-3xl mx-auto px-6 mt-6">
    <input
      type="text"
      id="searchInput"
      placeholder="ë‚´ìš© ê²€ìƒ‰..."
      class="w-full border px-4 py-2 rounded focus:outline-[#4a90e2]"
    />
  </section>

  <!-- ê¸€ì“°ê¸° í¼ -->
  <section class="max-w-3xl mx-auto px-6 py-6 bg-white shadow mt-6 rounded">
    <h2 class="text-lg font-semibold mb-4 text-[#4a90e2]">ğŸ“ ê¸€ ì‘ì„±</h2>
    <form id="postForm" class="space-y-4" action="home/community">
      <textarea name="comment" id="content" rows="4" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..." required class="w-full border px-4 py-2 rounded resize-none"></textarea>
      <button type="submit" class="bg-[#4a90e2] hover:bg-[#357ab8] text-white font-semibold px-6 py-2 rounded">
        ë“±ë¡í•˜ê¸°
      </button>
    </form>
  </section>

  <!-- ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ -->
  <section class="max-w-3xl mx-auto px-6 py-6">
    <h2 class="text-lg font-semibold mb-4 text-[#4a90e2]">ğŸ“‹ ê²Œì‹œê¸€</h2>
    <div id="postList" class="space-y-4">
      <!-- ê²Œì‹œê¸€ì´ ì—¬ê¸°ì— ì¶”ê°€ë¨ -->
    </div>
  </section>

  <!-- í‘¸í„° -->
  <footer class="text-center bg-gray-200 text-sm py-6 mt-10">
    Â© 2025 êµ¬ì§ë„ì›€ ì›¹ì‚¬ì´íŠ¸ - í•¨ê»˜í•˜ëŠ” ì»¤ë®¤ë‹ˆí‹°
  </footer>

  <!-- JS ê¸°ëŠ¥ -->
  <script>
    const postForm = document.getElementById("postForm");
    const postList = document.getElementById("postList");
    const searchInput = document.getElementById("searchInput");

    postForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const nickname = "ìµëª…"; // ê³ ì •
      const content = document.getElementById("content").value.trim();
      const date = new Date().toLocaleString("ko-KR");

      if (content) {
        const postDiv = document.createElement("div");
        postDiv.className = "bg-white p-4 rounded shadow post";
        postDiv.setAttribute("data-nickname", nickname.toLowerCase());
        postDiv.setAttribute("data-content", content.toLowerCase());

        postDiv.innerHTML = `
          <div class="text-sm text-gray-500 mb-1">${nickname} â€¢ ${date}</div>
          <div class="text-gray-800 whitespace-pre-line mb-2">${content}</div>
          <div class="flex items-center gap-4 text-sm mb-2">
            <button class="likeBtn text-[#4a90e2]">â¤ï¸ ì¢‹ì•„ìš” <span class="likeCount">0</span></button>
            <button class="deleteBtn text-red-500 hover:underline">ì‚­ì œ</button>
          </div>

          <!-- ëŒ“ê¸€ ì…ë ¥ -->
          <div class="mt-3">
            <form class="commentForm flex gap-2 items-center">
              <input type="text" value="ìµëª…" readonly class="border px-2 py-1 text-sm w-1/4 rounded bg-gray-100 text-gray-600" />
              <input type="text" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”..." class="commentInput border rounded px-2 py-1 text-sm w-full" required />
              <button type="submit" class="text-sm bg-[#4a90e2] text-white px-3 py-1 rounded">ë“±ë¡</button>
            </form>
            <div class="commentList mt-2 space-y-1 text-sm"></div>
          </div>
        `;

        postList.prepend(postDiv);
        postForm.reset();
        filterPosts(); // í•„í„° ì ìš©
      }
    });

    // ì¢‹ì•„ìš” ê¸°ëŠ¥
    postList.addEventListener("click", (e) => {
      if (e.target.classList.contains("likeBtn")) {
        const countEl = e.target.querySelector(".likeCount");
        countEl.textContent = parseInt(countEl.textContent) + 1;
      }

      // ëŒ“ê¸€ ì‚­ì œ
      if (e.target.classList.contains("deleteComment")) {
        e.target.parentElement.remove();
      }

      // ê²Œì‹œê¸€ ì‚­ì œ
      if (e.target.classList.contains("deleteBtn")) {
        if (confirm("ì´ ê¸€ì„ ì‚­ì œí• ê¹Œìš”?")) {
          e.target.closest(".post").remove();
        }
      }
    });

    // ëŒ“ê¸€ ë“±ë¡
    postList.addEventListener("submit", (e) => {
      if (e.target.classList.contains("commentForm")) {
        e.preventDefault();

        const form = e.target;
        const nickname = "ìµëª…";
        const comment = form.querySelector(".commentInput").value.trim();
        const commentList = form.nextElementSibling;

        if (comment) {
          const commentEl = document.createElement("div");
          commentEl.className = "flex justify-between items-center bg-gray-100 rounded px-3 py-1";
          commentEl.innerHTML = `
            <span><strong>${nickname}</strong>: ${comment}</span>
            <button class="text-red-500 text-xs deleteComment">ì‚­ì œ</button>
          `;
          commentList.appendChild(commentEl);
          form.reset();
        }
      }
    });

    // ê²€ìƒ‰ í•„í„°ë§
    searchInput.addEventListener("input", filterPosts);

    function filterPosts() {
      const keyword = searchInput.value.toLowerCase();
      const posts = document.querySelectorAll(".post");

      posts.forEach(post => {
        const nick = post.dataset.nickname;
        const content = post.dataset.content;
        post.style.display = (nick.includes(keyword) || content.includes(keyword)) ? "block" : "none";
      });
    }
  </script>

</body>
</html>

